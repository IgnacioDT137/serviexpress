<%- include('partials/_header') -%>
<%- include('partials/_barra') -%>

<div class="container mt-4">
  <button class="btn btn-primary" onclick="generarInforme()">Generar Informe</button>
  <table class="table table-dark table-bordered">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Cantidad</th>
        <th scope="col">Fecha pedido</th>
        <th scope="col">Fecha llegada</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% data.map(ped => { %>
        <tr>
          <td><%- ped.id_pedido -%></td>
          <td><%- ped.cantidad -%></td>
          <td><%= ped.fecha_pedido.toLocaleDateString() %></td>
          <% if (ped.fecha_llegada) { %>
            <td><%= ped.fecha_llegada.toLocaleDateString() %></td>
          <% } else { %>
            <td>No recibido</td>
          <% } %>
          <td>
          <% if (!ped.fecha_llegada) { %>
            <a href="/recibirPedido/<%- ped.id_pedido -%>" class="btn btn-success">Registrar llegada</a>
          <% } %>
          </td>
        </tr>
      <% } ) %>
    </tbody>
  </table>
</div>

<table class="table table-dark table-bordered mt-4" id="tabla">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Cantidad</th>
      <th scope="col">Fecha pedido</th>
      <th scope="col">Fecha llegada</th>
    </tr>
  </thead>
  <tbody>
    <% data.map(ped => { %>
      <tr>
        <td><%- ped.id_pedido -%></td>
        <td><%- ped.cantidad -%></td>
        <td><%= ped.fecha_pedido.toLocaleDateString() %></td>
        <% if (ped.fecha_llegada) { %>
          <td><%= ped.fecha_llegada.toLocaleDateString() %></td>
        <% } else { %>
          <td>No recibido</td>
        <% } %>
      </tr>
    <% } ) %>
  </tbody>
</table>

<%- include('partials/_footer') -%>